name: Build and test
on: [workflow_call]
env:
  TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
  TURBO_TEAM: ${{ secrets.TURBO_TEAM }}
  TURBO_REMOTE_ONLY: true
jobs:
  build_and_lint_check:
    name: ğŸ” Typecheck #, check formatting, and lint
    uses: ./.github/workflows/build-reusable.yml
    with:
      afterBuild: pnpm typecheck
    secrets: inherit
  test-serwist-build:
    name: âš«ï¸ Run Jest (development mode) integration tests
    uses: ./.github/workflows/build-reusable.yml
    with:
      afterBuild: |
        pnpm test -- -- __tests__/build --ci --runInBand
    secrets: inherit
